{"service":"nhs-virtual-visit","level":"error","message":"Error sending booking notifications container.getRetrieveDepartmentById is not a function","stack":"TypeError: container.getRetrieveDepartmentById is not a function\n    at /home/joe/nhs-virtual-visit/pages/api/update-a-visit.js:90:40\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at Object.<anonymous> (/home/joe/nhs-virtual-visit/test/pages/api/update-a-visit.test.js:268:5)","timestamp":"2021-02-08T11:46:32.311Z"}
{"service":"nhs-virtual-visit","level":"error","message":"Error sending booking notifications container.getRetrieveDepartmentById is not a function","stack":"TypeError: container.getRetrieveDepartmentById is not a function\n    at /home/joe/nhs-virtual-visit/pages/api/update-a-visit.js:90:40\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at Object.<anonymous> (/home/joe/nhs-virtual-visit/test/pages/api/update-a-visit.test.js:325:5)","timestamp":"2021-02-08T11:46:32.313Z"}
{"service":"nhs-virtual-visit","level":"error","message":"Error sending booking notifications container.getRetrieveDepartmentById is not a function","stack":"TypeError: container.getRetrieveDepartmentById is not a function\n    at /home/joe/nhs-virtual-visit/pages/api/update-a-visit.js:90:40\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at Object.<anonymous> (/home/joe/nhs-virtual-visit/test/pages/api/update-a-visit.test.js:388:5)","timestamp":"2021-02-08T11:46:32.315Z"}
{"service":"nhs-virtual-visit","level":"error","message":"Error sending booking notifications container.getRetrieveDepartmentById is not a function","stack":"TypeError: container.getRetrieveDepartmentById is not a function\n    at /home/joe/nhs-virtual-visit/pages/api/update-a-visit.js:90:40\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at Object.<anonymous> (/home/joe/nhs-virtual-visit/test/pages/api/update-a-visit.test.js:444:5)","timestamp":"2021-02-08T11:46:32.317Z"}
{"service":"nhs-virtual-visit","level":"error","message":"Error sending booking notifications container.getRetrieveDepartmentById is not a function","stack":"TypeError: container.getRetrieveDepartmentById is not a function\n    at /home/joe/nhs-virtual-visit/pages/api/update-a-visit.js:90:40\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at Object.<anonymous> (/home/joe/nhs-virtual-visit/test/pages/api/update-a-visit.test.js:501:5)","timestamp":"2021-02-08T11:46:32.318Z"}
{"service":"nhs-virtual-visit","level":"error","message":"Error sending booking notifications container.getRetrieveDepartmentById is not a function","stack":"TypeError: container.getRetrieveDepartmentById is not a function\n    at /home/joe/nhs-virtual-visit/pages/api/update-a-visit.js:90:40\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at Object.<anonymous> (/home/joe/nhs-virtual-visit/test/pages/api/update-a-visit.test.js:559:5)","timestamp":"2021-02-08T11:46:32.320Z"}
{"service":"nhs-virtual-visit","level":"error","message":"Error sending booking notifications container.getRetrieveDepartmentById is not a function","stack":"TypeError: container.getRetrieveDepartmentById is not a function\n    at /home/joe/nhs-virtual-visit/pages/api/update-a-visit.js:90:40\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at Object.<anonymous> (/home/joe/nhs-virtual-visit/test/pages/api/update-a-visit.test.js:624:5)","timestamp":"2021-02-08T11:46:32.324Z"}
{"service":"nhs-virtual-visit","level":"error","message":"Error sending booking notifications container.getRetrieveDepartmentById is not a function","stack":"TypeError: container.getRetrieveDepartmentById is not a function\n    at /home/joe/nhs-virtual-visit/pages/api/update-a-visit.js:90:40\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at Object.<anonymous> (/home/joe/nhs-virtual-visit/test/pages/api/update-a-visit.test.js:689:5)","timestamp":"2021-02-08T11:46:32.327Z"}
{"service":"nhs-virtual-visit","level":"error","message":"Error sending booking notifications container.getRetrieveDepartmentById is not a function","stack":"TypeError: container.getRetrieveDepartmentById is not a function\n    at /home/joe/nhs-virtual-visit/pages/api/update-a-visit.js:90:40\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at Object.<anonymous> (/home/joe/nhs-virtual-visit/test/pages/api/update-a-visit.test.js:757:5)","timestamp":"2021-02-08T11:46:32.329Z"}
{"service":"nhs-virtual-visit","level":"error","message":"Error sending booking notifications container.getRetrieveDepartmentById is not a function","stack":"TypeError: container.getRetrieveDepartmentById is not a function\n    at /home/joe/nhs-virtual-visit/pages/api/update-a-visit.js:90:40\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at Object.<anonymous> (/home/joe/nhs-virtual-visit/test/pages/api/update-a-visit.test.js:832:5)","timestamp":"2021-02-08T11:46:32.333Z"}
{"service":"nhs-virtual-visit","level":"error","message":"Error sending booking notifications container.getRetrieveDepartmentById is not a function","stack":"TypeError: container.getRetrieveDepartmentById is not a function\n    at /home/joe/nhs-virtual-visit/pages/api/update-a-visit.js:90:40\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at Object.<anonymous> (/home/joe/nhs-virtual-visit/test/pages/api/update-a-visit.test.js:907:5)","timestamp":"2021-02-08T11:46:32.335Z"}
{"service":"nhs-virtual-visit","level":"error","message":"Error sending booking notifications container.getRetrieveDepartmentById is not a function","stack":"TypeError: container.getRetrieveDepartmentById is not a function\n    at /home/joe/nhs-virtual-visit/pages/api/update-a-visit.js:90:40\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\n    at Object.<anonymous> (/home/joe/nhs-virtual-visit/test/pages/api/update-a-visit.test.js:984:5)","timestamp":"2021-02-08T11:46:32.338Z"}
{"message":"Error retrieving managers TypeError: getMsSqlConnPool is not a function","level":"error","service":"nhs-virtual-visit","timestamp":"2021-02-08T11:46:34.603Z"}
{"message":"Error verifying user with email no-email@nhs.co.uk: TypeError: Cannot read property 'password' of undefined","level":"error","service":"nhs-virtual-visit","timestamp":"2021-02-08T11:46:34.805Z"}
